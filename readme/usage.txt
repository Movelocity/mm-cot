# Training

## rationale generation
CUDA_VISIBLE_DEVICES=0,1 python main.py \
    --model allenai/unifiedqa-t5-base \
    --user_msg rationale --img_type detr \
    --bs 8 --eval_bs 4 --eval_acc 10 --output_len 512 \
    --final_eval --prompt_format QCM-LE

## answer inference
CUDA_VISIBLE_DEVICES=0,1 python main.py \
    --model allenai/unifiedqa-t5-base \
    --user_msg answer --img_type detr \
    --bs 8 --eval_bs 4 --eval_acc 10 --output_len 64 \
    --final_eval --prompt_format QCMG-A \
    --eval_le experiments/rationale_allenai-unifiedqa-t5-base_detr_QCM-LE_lr5e-05_bs16_op512_ep20/predictions_ans_eval.json \
    --test_le experiments/rationale_allenai-unifiedqa-t5-base_detr_QCM-LE_lr5e-05_bs16_op512_ep20/predictions_ans_test.json

# Inference

## rationale generation
CUDA_VISIBLE_DEVICES=0,1 python main.py \
    --model allenai/unifiedqa-t5-base \
    --user_msg rationale --img_type detr \
    --bs 8 --eval_bs 4 --eval_acc 10 --output_len 512 \
    --final_eval --prompt_format QCM-LE \
    --evaluate_dir models/MM-CoT-UnifiedQA-base-Rationale

## answer inference
CUDA_VISIBLE_DEVICES=0,1 python main.py \
    --model allenai/unifiedqa-t5-base \
    --user_msg answer --img_type detr \
    --bs 8 --eval_bs 4 --eval_acc 10 --output_len 64 \
    --final_eval --prompt_format QCMG-A \
    --eval_le models/rationale/predictions_ans_eval.json \
    --test_le models/rationale/predictions_ans_test.json \
    --evaluate_dir models/MM-CoT-UnifiedQA-base-Answer


# du -h models/*/*
1.5K	models/MM-CoT-UnifiedQA-base-Answer/config.json
250K	models/MM-CoT-UnifiedQA-base-Answer/predictions_ans_test.json
865M	models/MM-CoT-UnifiedQA-base-Answer/pytorch_model.bin
2.5K	models/MM-CoT-UnifiedQA-base-Answer/special_tokens_map.json
774K	models/MM-CoT-UnifiedQA-base-Answer/spiece.model
2.5K	models/MM-CoT-UnifiedQA-base-Answer/tokenizer_config.json
4.0K	models/MM-CoT-UnifiedQA-base-Answer/training_args.bin

1.5K	models/MM-CoT-UnifiedQA-base-Rationale/config.json
6.8M	models/MM-CoT-UnifiedQA-base-Rationale/predictions_ans_eval.json
6.9M	models/MM-CoT-UnifiedQA-base-Rationale/predictions_ans_test.json
865M	models/MM-CoT-UnifiedQA-base-Rationale/pytorch_model.bin
2.5K	models/MM-CoT-UnifiedQA-base-Rationale/special_tokens_map.json
774K	models/MM-CoT-UnifiedQA-base-Rationale/spiece.model
2.5K	models/MM-CoT-UnifiedQA-base-Rationale/tokenizer_config.json
4.0K	models/MM-CoT-UnifiedQA-base-Rationale/training_args.bin